function Papaya(canvas,textCanvas,width,height){
	this.canvas = document.getElementById(canvas);
	this.context = this.canvas.getContext('2d');
	this.canvasText = document.getElementById(textCanvas);
	this.contextText = this.canvasText.getContext('2d');
	this.sceenObject = {};
	this.sceenWidth = width;
	this.sceenHeight = height;
	this.k = innerWidth/width;
	this.canvasSetSize();
	this.menuArr = [];
};
Papaya.prototype.canvasSetSize = function(){
		this.canvas.width = window.innerWidth;
		this.canvas.height = window.innerHeight-5;
		this.canvasText.width = window.innerWidth;
		this.canvasText.height = window.innerHeight-5;
};
Papaya.prototype.sorting = function(){
	var self = this;
	var sorted = {};
	var keysSorted = Object.keys(self.sceenObject).sort(function(a,b){
			return self.sceenObject[a].weight-self.sceenObject[b].weight;
	});
	
	for(var i=0;keysSorted.length>i;i++){
		sorted[keysSorted[i]] =  self.sceenObject[keysSorted[i]];
	}
	return sorted;
}
Papaya.prototype.loadImages = function(callback) {
	var source;
	var arrObjName = [];
  var images = {};
  var loadedImages = 0;
  var numImages = 0;
	
	for(var objName in this.sceenObject){
		arrObjName.push(objName);
	}
   for(var name in this.sceenObject) {
    images[name] = new Image();
    images[name].onload = function() {
      if(++loadedImages >= arrObjName.length) {
        callback(images);
			}
		};
		images[name].src = this.sceenObject[name].src;
	}
};
Papaya.prototype.imageDraw = function(name){
	var self = this;
	var imageObj = new Image();
      imageObj.onload = function() {
        		self.context.drawImage(
									imageObj, 
									self.sceenObject[name].posY, 
									self.sceenObject[name].posX, 
									self.sceenObject[name].width, 
									self.sceenObject[name].height);
      };
    imageObj.src = self.sceenObject[name].src;

}

Papaya.prototype.sceenObjectGet = function(){
	
}

Papaya.prototype.sceenObjectAdd = function(obj){
	if(obj.width!==undefined && obj.height!==undefined){
		obj.width *= this.k;
		obj.height *= this.k;
	}
	if(obj.posX!==undefined && obj.posY!==undefined){
		obj.posX *= this.k;
		obj.posY *= this.k;
	}
	this.sceenObject[obj.name] = obj;
	
	
};
Papaya.prototype.menuAdd = function(name,x,y,text){
    this.contextText.font = 'bold '+14*this.k+'pt Calibri';
		this.contextText.fillText(text, this.sceenObject[name].posX+x*this.k, this.sceenObject[name].posY+y*this.k);
		this.menuArr.push(name);
}
Papaya.prototype.menuEvent = function(event){
	var self = this;
	var rect = self.canvasText.getBoundingClientRect();
	var x = event.clientX-rect.left;
	var y = event.clientY-rect.top;
	var objX = self.sceenObject['totem-about'].posX+30;
	var objY = self.sceenObject['totem-about'].posY;
	var objYend = objY + self.sceenObject['totem-about'].height-70;
	var objXend = objX + self.sceenObject['totem-about'].width-40;
			if((x>=objX && x<=objXend) && (y>=objY && y<=objYend))
				console.log("test");
				
	for(var i =0;self.menuArr.length>i;i++){
		
	}
};
Papaya.prototype.run = function(){
		
		this.canvasText.onclick=function(event){
			this.menuEvent(event);
		}
		
			papaya.sceenObjectAdd({
													name:'totem-about',
													src:'/images/totem-about.png',
													width:157,
													height:391,
													posX:400,
													posY:400,
													weight:1,
													});
		papaya.sceenObjectAdd({
													name:'bar-and-cuhnya',
													src:'/images/bar-and-cuhnya.png',
													width:147,
													height:399,
													posX:360,
													posY:540,
													weight:1,
													});		
													
		papaya.sceenObjectAdd({
													weight:0,
													name:'bg-sceen',
													src:'/images/bg-sceen.jpg',
													width:2048,
													height:1200,posX:0,
													posY:0});
		
		papaya.imageDraw('bg-sceen');
		papaya.imageDraw('totem-about');
		papaya.imageDraw('bar-and-cuhnya');
		


		
	this.menuAdd("totem-about",62,208,"О БАРЕ");
	this.menuAdd("bar-and-cuhnya",240,0,"БАР И");
	this.menuAdd("bar-and-cuhnya",240,20,"КУХНЯ");
	
};

